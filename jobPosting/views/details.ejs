<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Importing navigation bar -->
    <%- include('./partials/nav.ejs') %>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Document</title>
</head>
<body style="font-family: 'Courier New', Courier, monospace; text-align: center;">

    <div style="width: 70%; margin-left: 15em; margin-top: 2em;">
        <!--Edit and delete buttons-->
        <h4>
            <form action="/displayPostList/editPost/<%= post._id %> " method="GET" style='text-align: right;'>
                <button style="margin-left: 25em;">Edit</button>
                <a class="delete" data-doc=" <%= post._id%> " style='color:white'>Delete</a>
            </form>
        </h4> 
        <!-- Post details -->
        <h1><%= post.title  %> </h1>
        <h4 style="border-bottom:  solid; padding-bottom: 1em; text-align: left;"><span>Company:</span><%= post.company %>
        </h4>
        <p style="text-align: left;"><%= post.body  %></p>

        <!-- script for delete request -->
        <script>
            const del = document.querySelector('a.delete');
            del.addEventListener('click', (e) => {
                
              const endpoint = `/displayPostList/${del.dataset.doc}`;
              //console.log(del.dataset.doc);
  
              fetch(endpoint, {
                  method:"DELETE"
              })
              .then((response) => {response.json()})
              .then((data) => {
                  console.log(data);
                  window.location.href = '/displayPostList'})
              .catch(err => console.log(err));
            })
        </script>

    </div>
    <style>
        button{
            cursor:pointer;
            border: none;
            background-color: red;
            color: white;
        }
        button:hover{
            box-shadow: 4px 4px  lightgray;
        }
        a.delete{
            cursor:pointer;
            border: none;
            padding: 0.1em;
            background-color: red;
        }
        a.delete:hover{
            box-shadow: 4px 4px  lightgray;
        }
    </style>

    
</body>
</html>